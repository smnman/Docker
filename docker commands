Docker commands: 

dockerd // how logs of daemon 
dockerd --debug // also show logs
installtion on:

/var/run/docker.sock // Unix socker 
dockerd --host=IPOFTHEHOST:2375
from other server you can view logs with
export DOCKER_HOST="tcp://TARGETIPOFDOCKER:2375" // 2376 is for encrypted 

docker default config file:
/etc/docker/daemon.json

new docker format commads:
docker container ls -l
docker container ls 
docker container run -itd --name=webapp ubuntu // create continaer with name 
docker container rename webapp custom-webapp // rename container
docker container run -d httpd // run in detach mode.
docker container attach contianerID // will attach to the shell the continaer.

to detach from the container press CTRL+p+q and it will start run in the bg.
docker container exec containerid hostname // print hostname of the container
docker container exec -it contaierid /bin/bash // give us bash shell to conainter

inspecting container:
docker container inspect webapp
docker container stats // show us containers resources usage like CPU,MEMORY USAGE,I/O.
docker container top webapp // shows us the proccess top in the continaer
docker container logs containerName // shows us logs
docker container logs -f continaername // shows us live logs
docker system events --since 60m // shows us system events of docker all events.

setting hostname to a container:
docker container run -it --name=webapp --hostname=webapp ubuntu

docker container run --restart=always ubuntu
restart policies:
1.always
2.no
3.on-failure
4.unless-stopped

/etc/docker/daemon.json
live restore:true // this option make the apps inside the container still running if docker daemon is down.

copy files from host to container
docker container cp /tmp/web.conf webapp:/etc/web.conf

ports:
docker run -p 8000:5000 kodekloud/webapp
docker run -p 192.168.1.4:8000:5000 kodekloude/webapp
docker run -p 127.0.0.1:8000:5000 kodekolud/webapp
docker run -p 5000 kodekolude/webapp
docker run -P kodekoloud/webapp
docker run -P --expose=8080 kodekoloud/webapp

for debug porpses you should set the debug option to true:
docker system info
vi /etc/docker/daemon.json
{
  "debug":true
}
systemctl restart docker
run container
to see logs: cat var/log/messeges

logging drivers:
cd /var/lib/docker/containers; ls
cat containerID.json
to change logs path go to daemon.json file
"log-driver": "awslogs" // for AWS
docker run -d --log-driver json-file nginx

docker images:
docker system df // shows us  
SIZE of Images,Containers,Local Volumes...
docker image tag httpd:alpine httpd:simonv1 // will tag the httpd:alpine to my tag.
docker image save alpine:latest -o alpine.tar // save image to tar
docker image load -i alpine.tar // uploading the image to docker 

basic Dockerfile
FROM Ubuntu // os-ubuntu
RUN apt-get update && apt-get -y install python // update apt-repo && install python
RUN pip install flask flask-mysql // instal python dependecies using pip
COPY . /opt/source-code / copy source code to opt folder
ENTRYPOINT FLASK_APP=/opt/source-code/app.py flask run // run web server with flask fcommand 

create a image:
docker build . -f Dockerfile -t simon/my-custom-app
docker pish simon/my-custom-app
docker history imageName // shows the build of the image.
.dockerignore // ignores in build files inside the build directory.
### the most unused commands like yum/dnf install packages should be alawys on top and 
### the most used commands like editing my app code should be in bottom
### diffrence between COPY AND ADD
ADD can use tar and link to files.
FROM centos:7 
ADD app.tar.xz /testdir || ADD http://app.tar.xz /testdir // but its better to use COPY

network:
docker run ubuntu // bridge network
docker run ubntu --network=none //  no network assigned
docker run ubuntu --network=host // assiged to ip of the network in port 5000
docker network create --driver bridge --subnet 182.18.0.0/16  custom-isolated-network // create network
by defualt docker create 1 isolated netowkr for all containers.
docker network ls // to see netowrks
docker network insepct containerID // 
docker network connect custom-net my-container // to connect container to custom network
docket network disconnect custom-net my-container // to discoonect
docker network rm custom-net
docker network prune 


docker storage:
docker volume ls
docker volume create testvol
docker container run -itd --name=test -v testvol:/simon centos:7
docker container run -itd --name=test --mount source=testvol,destination=/simon centos:7 
docker container run -itd --name=test --mount source=testvol,destination=/simon,readonly centos:7 

mkdir /data
docker container run -itd --name=test --mount type=bind,source=/data,desitination=/simon centos:7 

docker volume inspect data_volume 
docker volume remove data_volume
docker volume prune 

ReadOnly Volume:
docker container run --mount source=data_vol1,destination=/var/www/html/index.html,readonly httpd
